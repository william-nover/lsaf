<?php if (!defined('BASEPATH')) exit('No direct script access allowed');class Model_contactus extends CI_Model{    function __construct()    {        parent::__construct();    }    function getModule($module_name)    {        $data  = array();        $sql   = "select module_id , module_group_id from tbl_module where module_path='" . $module_name . "' ";        $hasil = $this->db->query($sql);        if ($hasil->num_rows() > 0) {            $data = $hasil->result();        } else {            $data = '';        }        $hasil->free_result();        $this->db->close();        return $data;    }    function getContactusName()    {        $data  = array();        $sql   = "select contactus_id,contactus_name from tbl_contactus order by contactus_id asc";        $hasil = $this->db->query($sql);        if ($hasil->num_rows() > 0) {            $data = $hasil->result();        } else {            $data = '';        }        $hasil->free_result();        $this->db->close();        return $data;    }    function getListContactus($cond = null)    {        $query = " Select a.contactus_id  ,a.contactus_from, a.contactus_name, a.contactus_subject, a.contactus_email, a.contactus_message," . " DATE_FORMAT( a.contactus_date, '%d-%m-%Y %H:%i:%s' ) as contactus_date" . " from tbl_contactus as a" . $cond;        $query = $this->db->query($query)->result_array();        return $query;    }    public function getContactus($id)    {        $where = '';        if ($id != '') {            $where = "WHERE contactus_id = " . $id;        }        $query = " Select a.contactus_id  ,a.contactus_from, a.contactus_name, a.contactus_subject, a.contactus_email, a.contactus_message," . " DATE_FORMAT( a.contactus_date, '%d-%m-%Y %H:%i:%s' ) as contactus_date " . " from tbl_contactus a" . " $where ";        $query = $this->db->query($query)->result_array();        return $query;    }    function activeContactus($id)    {        $sql   = "UPDATE tbl_contactus SET status = abs(status-1)                   WHERE contactus_id = " . $id;        $query = $this->db->query($sql);        return $query;    }    function deleteContactus($id = '')    {        $sql   = "DELETE FROM tbl_contactus WHERE contactus_id = " . $id;        $query = $this->db->query($sql);        $str   = $this->db->last_query();        return $str;    }    function checkContactus($full_name)    {        $sql   = "SELECT full_name FROM tbl_contactus WHERE full_name = '" . $full_name . "'";        $query = $this->db->query($sql);        $rs    = $query->result_array();        return $rs;    }    function updateContactus($id, $password)    {        $sql   = "UPDATE tbl_contactus SET                 password='" . $password . "'  WHERE contactus_id = " . $id;        $query = $this->db->query($sql);        return $query;    }    function updateOrderContactus($id, $order)    {        $sql   = "UPDATE tbl_contactus SET                    contactus_stock= " . $order . ",                   contactus_update_by = " . $_SESSION['admin_data']['user_id'] . ", contactus_update_date=now() WHERE contactus_id = " . $id;        $query = $this->db->query($sql);        return $query;    }    function getContactusCategory()    {        $data  = array();        $sql   = "select * from tbl_contactus_category order by category_id asc";        $hasil = $this->db->query($sql);        if ($hasil->num_rows() > 0) {            $data = $hasil->result();        } else {            $data = '';        }        $hasil->free_result();        $this->db->close();        return $data;    }}