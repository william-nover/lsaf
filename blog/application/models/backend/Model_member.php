<?php if (!defined('BASEPATH')) exit('No direct script access allowed');class Model_member extends CI_Model{    function __construct()    {        parent::__construct();    }    function getModule($module_name)    {        $data  = array();        $sql   = "select module_id , module_group_id from tbl_module where module_path='" . $module_name . "' ";        $hasil = $this->db->query($sql);        if ($hasil->num_rows() > 0) {            $data = $hasil->result();        } else {            $data = '';        }        $hasil->free_result();        $this->db->close();        return $data;    }    function getMemberName()    {        $data  = array();        $sql   = "select member_id,full_name from tbl_member order by member_id asc";        $hasil = $this->db->query($sql);        if ($hasil->num_rows() > 0) {            $data = $hasil->result();        } else {            $data = '';        }        $hasil->free_result();        $this->db->close();        return $data;    }    function getListMember($cond = null)    {        $query = " Select a.member_id  ,a.full_name, a.phone,a.email," . " DATE_FORMAT( a.member_date, '%d-%m-%Y %H:%i:%s' ) as member_date" . " from tbl_member as a" . $cond;        $query = $this->db->query($query)->result_array();        return $query;    }    public function getMember($id)    {        $where = '';        if ($id != '') {            $where = "WHERE member_id = " . $id;        }        $query = " Select a.member_id ,a.full_name, a.phone ,a.email ," . " DATE_FORMAT( a.member_date, '%d-%m-%Y %H:%i:%s' ) as member_date " . " from tbl_member a" . " $where ";        $query = $this->db->query($query)->result_array();        return $query;    }    function activeMember($id)    {        $sql   = "UPDATE tbl_member SET status = abs(status-1)                   WHERE member_id = " . $id;        $query = $this->db->query($sql);        return $query;    }    function deleteMember($id = '')    {        $sql   = "DELETE FROM tbl_member WHERE member_id = " . $id;        $query = $this->db->query($sql);        $str   = $this->db->last_query();        return $str;    }    function checkMember($full_name)    {        $sql   = "SELECT full_name FROM tbl_member WHERE full_name = '" . $full_name . "'";        $query = $this->db->query($sql);        $rs    = $query->result_array();        return $rs;    }    function updateMember($id, $password)    {        $sql   = "UPDATE tbl_member SET                 password='" . $password . "'  WHERE member_id = " . $id;        $query = $this->db->query($sql);        return $query;    }    function updateOrderMember($id, $order)    {        $sql   = "UPDATE tbl_member SET                    member_stock= " . $order . ",                   member_update_by = " . $_SESSION['admin_data']['user_id'] . ", member_update_date=now() WHERE member_id = " . $id;        $query = $this->db->query($sql);        return $query;    }    function getMemberCategory()    {        $data  = array();        $sql   = "select * from tbl_member_category order by category_id asc";        $hasil = $this->db->query($sql);        if ($hasil->num_rows() > 0) {            $data = $hasil->result();        } else {            $data = '';        }        $hasil->free_result();        $this->db->close();        return $data;    }}